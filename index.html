<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Checklist PDF Generator</title>
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- jsPDF-AutoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <!-- DejaVuSans font -->
  <script src="NotoSans_Condensed-Black-normal.js"></script>
</head>
<body>
<script>
window.onload = () => {
  const { jsPDF } = window.jspdf;

  // ====== Task Lists ======
  const tasksEN = [
    "Assembly and connection of analog cameras",
    "Assembly and connection of DVR with cameras",
    "Assembly of electrical cabinets",
    "Assembly of wardrobes for swiches",
    "Assemby and connection of network switches, IT networks",
    "Assemby and installation of SMART HOUSE equipment",
    "Assemby of the PLC generator",
    "Cabling alarm systems",
    "Cabling and connection of equipment in SMART HOUSE",
    "Cabling and connection of PLC generator with asynchronous motor",
    "Cabling and installation of speakers",
    "Cabling automation MCR according to the diagram and plans",
    "Cabling emergency lighting installation",
    "Cabling fire alarm rings or loops",
    "Cabling intercom systems",
    "Cabling network installations",
    "Cabling power supply cables for control panels",
    "Commissioning electrical installations",
    "Commissioning the emergency lighting control panel",
    "Connecting and mounting the inverter",
    "Connecting distribution boxes",
    "Connecting magnetic contacts",
    "Connecting power supply cables",
    "Connection and assemby of readers on acces control",
    "Connection and cabling of photovoltaic panels",
    "Coding lamps and pictograms according to the plan",
    "Installation and connection of IP cameras",
    "Installation and connection of IP phones",
    "Installation and connection of intercom systems",
    "Installation and connection of low-voltage systems",
    "Installation and connection of manual fire alarms",
    "Installation and connection of optical cables",
    "Installation and connection of sockets for network installations",
    "Installation and connection of sirens",
    "Installation and connection of strobe lights",
    "Installation and conection of the wifi router",
    "Installation air conditioners and cabling",
    "Installation emergency lighting control panel",
    "Installation fire alarm holders",
    "Installation lamps and pictograms",
    "Installation MCR control panels",
    "Installation of cable trays according to the plan",
    "Installation of ventilation, cabling and connection systems",
    "Installation of sockets, switches, lamps, and sensors",
    "Laying electrical installations on ceilings and floors",
    "Measuring lighting in the emergency lighting installation",
    "Measuring network installations",
    "Measuring the emergency lighting installation",
    "Measuring the functionality of electrical installations",
    "Measurement of the phase position at the output of the inverter",
    "Reading alarm plans",
    "Reading automation plans (single-line diagrams and plans)",
    "Reading and understanding cable tray plans",
    "Reading electrical installation plans",
    "Reading emergency lighting plans",
    "Reading fire alarm system diagrams",
    "Reading network installation plans",
    "Reading speaker plans",
    "Reviewing installation plans",
    "Reviewing network installations",
    "Reviewing the emergency lighting installation",
    "Setting up the DVR for network access",
    "Wiring control panels and devices for automation",
    "Wiring electrical cabinets according to the single-line diagram"
  ];

  const tasksDE = [
    "Anschluss von Magnetkontakten",
    "Anschluss von Stromversorgungskabeln",
    "Anschluss und Montage des Wechselrichters",
    "Anschluss und Montage der Lesegeräte für die Zugangskontrolle",
    "Anschluss und Montage von Analogkameras",
    "Codierung der Lampen und Piktogramme nach Plan",
    "Einrichtung des DVR für Netzwerkzugriff",
    "Installation der Notbeleuchtungszentrale",
    "Installation und Anschluss des DVR mit Kameras",
    "Installation und Anschluss von Blitzlichtern",
    "Installation und Anschluss von Glasfaserkabeln",
    "Installation und Anschluss von IP-Kameras",
    "Installation und Anschluss von IP-Telefonen",
    "Installation und Anschluss von Sirenen",
    "Installation und Anschluss von Steckdosen für Netzwerkinstallationen",
    "Installation und Anschluss von Türsprechanlagen",
    "Installation und Einrichtung des WLAN-Routers",
    "Installation von Klimaanlagen und Verkabelung",
    "Installation von Lampen und Piktogrammen",
    "Installation von Lüftungs-, Verkabelungs- und Anschlusssystemen",
    "Installation von MSR-Schaltschränken",
    "Installation von Schaltschränken",
    "Installation von Schaltschränken für Switches",
    "Installation von SMART-HOUSE-Geräten",
    "Installation von Steckdosen, Schaltern, Lampen, Sensoren",
    "Installation von Brandmelderträgern",
    "Inbetriebnahme der Elektroinstallationen",
    "Inbetriebnahme der Sicherheitsbeleuchtung-Zentrale",
    "Lesen von Alarmplänen",
    "Lesen von Automatisierungsplänen (Einlinienschaltplan und Pläne)",
    "Lesen von Elektroinstallationsplänen",
    "Lesen von Lautsprecherplänen",
    "Lesen von Netzwerkinstallationsplänen",
    "Lesen von Notbeleuchtungsplänen",
    "Lesen von Schaltplänen für Brandmeldeanlagen",
    "Lesen und Verstehen von Kabeltrassenplänen",
    "Messung der Beleuchtung in der Sicherheitsbeleuchtung-Installation",
    "Messung der Funktionalität der Elektroinstallationen",
    "Messung der Phasenlage am Ausgang des Wechselrichters",
    "Messung der Sicherheitsbeleuchtung-Installation",
    "Messung der Netzwerkinstallation",
    "Überprüfung der Installationspläne",
    "Überprüfung der Netzwerkinstallation",
    "Überprüfung der Sicherheitsbeleuchtung-Installation",
    "Verkabelung der Alarmanlagen",
    "Verkabelung der Automatisierung MSR gemäß Schaltplan und Plänen",
    "Verkabelung der Brandmeldertürge oder Loops",
    "Verkabelung der Geräte im SMART HOUSE",
    "Verkabelung der Notbeleuchtungsinstallation",
    "Verkabelung der Stromversorgungskabeln für Schaltschränke",
    "Verkabelung der Türsprechanlagen",
    "Verkabelung der Netzwerkinstallation",
    "Verkabelung der Photovoltaikmodule",
    "Verkabelung und Anschluss des PLC-Generators mit Asynchronmotor",
    "Verkabelung und Anschluss von Lautsprechern",
    "Verdrahtung von Schaltschränken nach Einlinienschaltplan",
    "Verdrahtung von Schaltschränken und Geräten für Automatisierung"

  ];

  const tasksSRB = [
    "Čitanje planova alarma",
    "Čitanje planova automatizacije (jednopolne šeme i planovi)",
    "Čitanje planova elektroinstalacija",
    "Čitanje planova instalacija",
    "Čitanje planova mrežne instalacije",
    "Čitanje planova protivpožarnog alarma",
    "Čitanje planova za hitnu rasvetu",
    "Čitanje planova za kablovske police",
    "Čitanje planova za zvučnike",
    "Instalacija klima uređaja i kabliranje",
    "Instalacija lampi i piktograma",
    "Instalacija mrežnih ormara za switch-eve",
    "Instalacija nosača protivpožarnih alarma",
    "Instalacija utičnica, prekidača, rasvetnih tela i senzora",
    "Instalacija upravljačke table za hitnu rasvetu",
    "Instalacija upravljačkih tabli MCR",
    "Instalacija ventilacionih sistema, kabliranje i povezivanje",
    "Instalacija i kabliranje opreme za pametnu kuću",
    "Instalacija i ožičenje zvučnika",
    "Instalacija i povezivanje IP kamera",
    "Instalacija i povezivanje IP telefona",
    "Instalacija i povezivanje interfonskih sistema",
    "Instalacija i povezivanje niskonaponskih sistema",
    "Instalacija i povezivanje optičkih kablova",
    "Instalacija i povezivanje ručnih protivpožarnih alarma",
    "Instalacija i povezivanje sirena",
    "Instalacija i povezivanje stroboskopskih svetala",
    "Instalacija i povezivanje utičnica za mrežne instalacije",
    "Instalacija i povezivanje WiFi rutera",
    "Kabliranje alarmnih sistema",
    "Kabliranje automatizacije MCR prema šemi i planovima",
    "Kabliranje i povezivanje fotonaponskih panela",
    "Kabliranje i povezivanje PLC upravljača sa asinhronim motorom",
    "Kabliranje interfonskih sistema",
    "Kabliranje mrežnih instalacija",
    "Kabliranje napojnih kablova za upravljačke panele",
    "Kodiranje lampi i piktograma prema planu",
    "Merenje faznog položaja na izlazu invertera",
    "Merenje funkcionalnosti elektroinstalacija",
    "Merenje instalacije hitne rasvete",
    "Merenje mrežnih instalacija",
    "Merenje osvetljenosti u instalaciji hitne rasvete",
    "Montaža DVR uređaja sa kamerama",
    "Montaža elektroormara",
    "Montaža i instalacija opreme za pametnu kuću",
    "Montaža i povezivanje analognih kamera",
    "Montaža i povezivanje mrežnih switch-eva i IT mreža",
    "Montaža i povezivanje čitača na sistemu kontrole pristupa",
    "Montaža PLC generatora",
    "Ožičavanje elektroormara prema jednopolnoj šemi",
    "Ožičavanje instalacije hitne rasvete",
    "Ožičavanje protivpožarnih prstenova ili petlji",
    "Ožičavanje upravljačkih tabli i uređaja za automatizaciju",
    "Postavljanje elektroinstalacija na plafonima i podovima",
    "Povezivanje distribucionih kutija",
    "Povezivanje i montaža invertera",
    "Povezivanje magnetnih kontakata",
    "Pregled instalacije hitne rasvete",
    "Pregled mrežnih instalacija",
    "Puštanje elektroinstalacija u rad",
    "Puštanje u rad upravljačke table za hitnu rasvetu",
    "Priključenje napojnih kablova",
    "Ugradnja kablovskih polica prema planu"
  ];

  // ====== Read URL parameters ======
  const params = new URLSearchParams(window.location.search);
  const candidateName = decodeURIComponent(params.get("name") || "Unknown_Candidate");
  const selectedParam = decodeURIComponent(params.get("checklist") || "");
  const lang = (params.get("lang") || "EN").toUpperCase();

  // ====== Select correct task list ======
  let taskList;
  switch(lang){
    case "DE": taskList = tasksDE; break;
    case "SRB": taskList = tasksSRB; break;
    default: taskList = tasksEN;
  }

  // ====== Build selection list ======
  const selectedList = selectedParam.split(";").map(i => i.trim()).filter(i => i !== "");

  // ====== Create PDF ======
  const doc = new jsPDF();

  // === Registration of the DejaVuSans font ===
  doc.addFileToVFS("NotoSans-Condensed-Black.ttf", NotoSansCondensedBlackNormal);
  doc.addFont("NotoSans-Condensed-Black.ttf", "NotoSansCondensedBlack", "normal");
  doc.setFont("NotoSansCondensedBlack");

  // Times font
  doc.setFont("DejaVuSans");

  // Title
  doc.setFontSize(16);
  doc.text("Candidate Checklist", doc.internal.pageSize.getWidth()/2, 15, {align:"center"});

  // Candidate name
  doc.setFontSize(12);
  doc.text("Name: " + candidateName, 15, 25);

  // Build table
  const tableData = taskList.map((task, i) => [
    i + 1,
    selectedList.includes(task) ? "✓" : "",
    task
  ]);

  doc.autoTable({
    startY: 35,
    head: [['Nr.', '✓', 'Description']],
    body: tableData,
    styles: { font: "DejaVuSans", fontSize: 10, cellPadding: 3, valign: "middle" },
    headStyles: { fillColor: [230, 230, 230], textColor: [0, 0, 0], fontStyle: 'bold', halign: "center" },
    columnStyles: { 0: { cellWidth: 10, halign:"center" }, 1: { cellWidth: 10, halign:"center" }, 2: { cellWidth: "auto" } },
    theme: "grid",
    alternateRowStyles: { fillColor: [245,245,245] }
  });

  // Save PDF
  doc.save(candidateName.replace(/\s+/g,"_") + "_Checklist.pdf");
};
</script>
</body>
</html>
